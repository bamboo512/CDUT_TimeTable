<!DOCTYPE html>
<html>

<head>
    <title>登录 - 成都理工大学 </title>
    <meta charset="UTF-8" />
    <meta name="renderer" content="webkit" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="icon" href="/cas/file/ico/webFavicon.ico" type="image/x-icon" />
    <script type="text/javascript">
        // var hmSiteId = "d605d8df6bf5ca8a54fe078683196518";
        var hmSiteId = "d605d8df6bf5ca8a54fe078683196518";
        if (hmSiteId) {
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?" + hmSiteId;
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        }
    </script>

    <script type="text/javascript" src="/cas/webjars/jquery/3.3.1/jquery.min.js"></script>

    <script src="/cas/deps/js/babel.min.js"></script>
    <script src="/cas/deps/js/babel.polyfill.js"></script>
    <script src="/cas/deps/js/vue/dist/vue.min.js"></script>

    <script src="/cas/deps/js/vant/vant.min.js"></script>

    <script src="/cas/deps/js/sw-ui/lib/index.js"></script>

    <link rel="stylesheet" type="text/css" href="/cas/deps/js/sw-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" type="text/css" href="/cas/schemes/409EFF/index.css">
    <script src='/cas/deps/js/jsencrypt/3.0.0-rc.1/jsencrypt.min.js' type="text/javascript"></script>

    <script type="text/javascript">
        var encryptEnabled = true;

        var encrypt = new JSEncrypt();

        var url = "\/cas\/jwt\/publicKey";
        $.get(url, function (publicKey) {
            // console.log(publicKey);
            encrypt.setPublicKey(publicKey);
        });
    </script>

    <link rel="stylesheet" type="text/css" href="/cas/themes/classic/css/style.css">
    <script type="text/javascript">
        "use strict";
        var ua = window.navigator.userAgent.toLowerCase();

        if ((ua.match(/MicroMessenger/i) == 'micromessenger') //&& (ua.match(/wxwork/i) == 'wxwork') 
        ) {
            var flag = null;
            var flag2 = null;//判断是否登录成功	
            var serviceUrl = null;

            if (flag != "qywx") {//防止企业微信无法验证再返回登录页时，形成死循环
                var appid = "ww0d48646a8ba54067";
                var baseuri = "https://open.weixin.qq.com/connect/oauth2/authorize?response_type=code&appid=" + appid + "&scope=snsapi_base&state=STATE&redirect_uri=";
                var callbackuri = "https://cas.paas.cdut.edu.cn/cas/login?way=qywx";
                if (flag2 == 'dlsb') {
                    callbackuri = callbackuri + "&dlsb=" + flag2;
                }
                if (serviceUrl != null && serviceUrl != "") {
                    callbackuri = callbackuri + "&service=" + serviceUrl;
                }
                window.location.href = baseuri + encodeURIComponent(callbackuri) + '#wechat_redirect';
            }

        }
    </script>

</head>

<body>


    <main role="main">
        <div id="content">

            <div id="vue_main" style="display:none;">
                <div style="display:none;">
                    <el-button id="showErrorMessageUsername" :plain="true" @click="showErrorMessageUsername">打开消息提示
                    </el-button>
                    <el-button id="showErrorMessagePassword" :plain="true" @click="showErrorMessagePassword">打开消息提示
                    </el-button>
                    <el-button id="showErrorMessageMobile" :plain="true" @click="showErrorMessageMobile">打开消息提示
                    </el-button>
                    <el-button id="showErrorMessageDynamicCode" :plain="true" @click="showErrorMessageDynamicCode">
                        打开消息提示</el-button>

                    <el-button id="showSuccessMessageSendCode" :plain="true" @click="showSuccessMessageSendCode">打开消息提示
                    </el-button>
                    <el-button id="showFailureMessageSendCode" :plain="true" @click="showFailureMessageSendCode">打开消息提示
                    </el-button>
                </div>

                <div>

                    <div class="sw-login"
                        style="display: flex; align-items: center; justify-content: center; height: 100vh; width: 100%; position: relative; background:url(/cas/themes/classic/images/bg.pic) repeat;">
                        <el-container
                            style="max-width: 1920px;max-height: 1080px; position: relative; height: 100vh;width: 100%; margin: 0px;">

                            <el-carousel @change="changeCarousel" :interval="5000" indicator-position="none"
                                arrow="never"
                                style="position: absolute; width: 100%; height: 100vh; max-height: 1080px;min-height: 625px;"
                                height="100vh">
                                <el-carousel-item v-for="item in bg" :key="item">
                                    <div :style="'background:url('+item+') no-repeat right;background-size:cover;'"
                                        style="max-height: 1080px;min-height: 625px; height: 100vh;"></div>
                                </el-carousel-item>
                            </el-carousel>

                            <div
                                style="position: absolute;width: 100%;height: 100vh;max-height: 1080px;min-height: 625px; z-index:5; left: 0;">
                                <div class="sw-login-logo-container"
                                    style="display: flex;align-items: center;width: auto;">
                                    <img style="margin-left: 27px; width: auto;height: 60px;"
                                        src="/cas/file/png/logo.png">
                                    <div style="border-left: 1px solid #000;margin: 0 20px;height: 36px;"></div>
                                    <div style="font-size: 22px; color: #409EFF;">统一身份认证</div>
                                </div>

                                <div style="
            position: absolute;
            bottom: 0px;
            left: 0px;
            width: 100%;
            height: 90px;
            background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 0%,rgba(0,0,0,0) 31%,rgba(0,0,0,0.6) 100%);
          ">

                                    <div style="
              position: absolute;
              bottom: 15px;
              left: 50px;
              font-size: 12px;
              color:#fff;
              display: flex;
              align-items: center;
            "></div>

                                </div>

                                <div class="sw-login-main" style="max-height: 1080px;min-height: 625px;">

                                    <div
                                        style="position: absolute;bottom: 15px;left: 50px;display: flex;align-items: center;color:#333333;font-size: 12px;z-index: 999;">
                                        <a href="http://wxc.cdut.edu.cn/info/1013/1560.htm" target="_blank"
                                            style="text-decoration-line: none; display: inline-block;color:#333333;font-size: 12px;"><span><i
                                                    class="su-icon-bulb"></i> 账号激活攻略</span></a>
                                        <span style="margin: 0 20px;color:#B4B4B4">|</span>

                                        <a href="http://wxc.cdut.edu.cn/info/1013/1560.htm" target="_blank"
                                            style="text-decoration-line: none; display: inline-block;color:#333333;font-size: 12px;"><span><i
                                                    class="su-icon-authguanli"></i> 密码找回攻略</span></a>
                                        <span style="margin: 0 20px;color:#B4B4B4">|</span>

                                        <span style="display: flex;align-items: center;">
                                            <span style="margin-right: 10px;">浏览器支持:</span>
                                            <img style="cursor: pointer;width: 14px;height: 14px;margin-right: 10px;"
                                                src="/cas/icon/chrome-icon.png" /><img
                                                style="cursor: pointer;width: 14px;height: 14px;margin-right: 10px;"
                                                src="/cas/icon/firefox-icon.png" /><img
                                                style="cursor: pointer;width: 14px;height: 14px;margin-right: 10px;"
                                                src="/cas/icon/ie-icon.png" /><img
                                                style="cursor: pointer;width: 14px;height: 14px;margin-right: 10px;"
                                                src="/cas/icon/360-icon.png" /><img
                                                style="cursor: pointer;width: 14px;height: 14px;margin-right: 10px;"
                                                src="/cas/icon/sogou-icon.png" /></span>
                                    </div>

                                    <div class="sw-login-main-blur" style="max-height: 1080px;min-height: 625px;"
                                        :style="'background-image:url('+bg[currentImage]+');'"></div>
                                    <div class="sw-login-main-content" style="max-height: 1080px;min-height: 625px;">

                                        <div v-show="!isQrcode">
                                            <div class="card">

                                                <el-menu @select="changeMenu" :default-active="currentMenu"
                                                    class="sw-login-menu" background-color="#ffffff00" text-color="#666"
                                                    active-text-color="#409EFF" mode="horizontal">
                                                    <el-menu-item index="1" style="margin: 0 20px 0 80px;">账号登录
                                                    </el-menu-item>
                                                    <el-menu-item index="2" style="margin: 0 0 0 20px;">手机动态码登录
                                                    </el-menu-item>
                                                </el-menu>

                                                <div v-show="currentMenu==1">

                                                    <el-form style="margin: 30px 80px" method="post" id="fm1"
                                                        action="login">

                                                        <div class="el-form-item el-form-item--small">
                                                            <div class="el-form-item__content">
                                                                <div
                                                                    class="sw-input el-input el-input--medium el-input--prefix el-input--suffix sw-input--circular">

                                                                    <div>

                                                                        <div>
                                                                            <input
                                                                                class="form-control required el-input__inner"
                                                                                placeholder="请输入用户名/手机/邮箱/证件号"
                                                                                title="请输入用户名/手机/邮箱/证件号" id="username"
                                                                                size="25" tabindex="1" type="text"
                                                                                accesskey="n" autocomplete="off"
                                                                                name="username" value="" />
                                                                        </div>

                                                                    </div>

                                                                    <span class="el-input__prefix"><i
                                                                            class="su-input-icon black su-input-icon-prefix el-input__icon su-icon-people"></i></span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="el-form-item el-form-item--small">
                                                            <div class="el-form-item__content">
                                                                <div
                                                                    class="sw-input el-input el-input--medium el-input--prefix el-input--suffix sw-input--circular">

                                                                    <div>
                                                                        <input
                                                                            class="form-control required el-input__inner"
                                                                            placeholder="请输入登录密码" title="请输入登录密码"
                                                                            type="password" id="password" size="25"
                                                                            tabindex="2" accesskey="p"
                                                                            autocomplete="off" name="password"
                                                                            value="" />
                                                                    </div>

                                                                    <span class="el-input__prefix"><i
                                                                            class="su-input-icon black su-input-icon-prefix el-input__icon su-icon-lock"></i></span>
                                                                    <span class="el-input__suffix"><span
                                                                            class="el-input__suffix-inner"
                                                                            style="display: none;"><i
                                                                                class="el-input__icon su-icon-hide el-input__clear"
                                                                                style="line-height: 32px;"
                                                                                onclick="javascript: togglePassword(this);"></i></span></span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div
                                                            class="captcha-input-container el-form-item el-form-item--small">
                                                            <div class="el-form-item__content">
                                                                <div
                                                                    class="sw-input el-input el-input--medium el-input--prefix el-input--suffix sw-input--circular">

                                                                    <div>
                                                                        <input
                                                                            class="form-control required el-input__inner"
                                                                            placeholder="请输入图片验证码" title="请输入图片验证码"
                                                                            type="text" id="captcha" name="captcha"
                                                                            tabindex="3"
                                                                            style="width: 75%; display: inline-block;"
                                                                            accesskey="c" autocomplete="off" /><img
                                                                            src="/cas/captcha.jpg" id="captcha_img"
                                                                            style="width: 20%; height: 38px; display: inline-block; float: right;"
                                                                            onclick="javascript:refreshCaptcha(this);"
                                                                            title="看不清，换一张！" />
                                                                    </div>

                                                                    <span class="el-input__prefix"><i
                                                                            class="su-input-icon black su-input-icon-prefix el-input__icon su-icon-dyncode"></i></span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <el-form-item style="padding:0 30px">
                                                            <el-checkbox style="float: right;" name="rememberMe"
                                                                id="rememberMe" label="true">记住我</el-checkbox>
                                                        </el-form-item>

                                                        <el-form-item>
                                                            <input type="hidden" name="currentMenu" value="1" /><input
                                                                type="hidden" name="failN" value="-1" /><input
                                                                type="hidden" name="execution" value="e4s1" /><input
                                                                type="hidden" name="_eventId" value="submit" /><input
                                                                type="hidden" name="geolocation" /><input
                                                                class="el-button el-button--primary el-button--medium is-round"
                                                                name="submit" accesskey="l" tabindex="6" type="submit"
                                                                value="登录" style="width: 100%" />
                                                        </el-form-item>

                                                        <el-form-item style="text-align: center">

                                                            <div
                                                                style="display: flex;justify-content: space-between;align-items: center;">
                                                                <a href="/cas/personal/forgotYourPassword?service="
                                                                    target="_blank">
                                                                    <el-button type="text"
                                                                        style="font-size: 14px; font-weight: 400;">忘记密码？
                                                                    </el-button>
                                                                </a>
                                                                <a href="/cas/personal/activeYourAccount?service="
                                                                    target="_blank">
                                                                    <el-button type="text"
                                                                        style="font-size: 14px; font-weight: 400;">激活账号
                                                                    </el-button>
                                                                </a>
                                                            </div>

                                                        </el-form-item>

                                                        <el-form-item>
                                                            <div id="loginError1">
                                                            </div>
                                                        </el-form-item>

                                                        <script type="text/javascript">
                                                            $(document).ready(function () {
                                                                var currentMenu = null;
                                                                if (currentMenu == "1") {
                                                                    var containerForm = $("#fm1");
                                                                    var originalUsername = null;
                                                                    if (originalUsername == null) {
                                                                        originalUsername = null;
                                                                    }
                                                                    var hasErrors = false;
                                                                    var errors = [];

                                                                    console.log("trigger processLoginError");
                                                                    processLoginError(containerForm, originalUsername, hasErrors, errors);
                                                                }
                                                            });
                                                        </script>

                                                    </el-form>

                                                </div>

                                                <div v-show="currentMenu==2">

                                                    <el-form style="margin: 30px 80px" method="post" id="fm2"
                                                        action="login">

                                                        <div class="el-form-item el-form-item--small">
                                                            <div class="el-form-item__content">
                                                                <div
                                                                    class="sw-input el-input el-input--medium el-input--prefix el-input--suffix sw-input--circular">

                                                                    <div>
                                                                        <input
                                                                            class="form-control required el-input__inner"
                                                                            placeholder="请输入手机号" title="请输入手机号"
                                                                            id="username" size="25" tabindex="1"
                                                                            type="text" accesskey="m" autocomplete="off"
                                                                            name="username" value="" />
                                                                    </div>

                                                                    <span class="el-input__prefix"><i
                                                                            class="su-input-icon black su-input-icon-prefix el-input__icon su-icon-people"></i></span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="el-form-item el-form-item--small">
                                                            <div class="el-form-item__content">
                                                                <div
                                                                    class="sw-input su-input-text-button el-input el-input--medium el-input-group el-input-group--append el-input--prefix sw-input--circular">

                                                                    <input class="form-control required el-input__inner"
                                                                        placeholder="请输入动态密码" title="请输入动态密码"
                                                                        onfocus="this.type='text'" id="password"
                                                                        size="25" tabindex="2" accesskey="d"
                                                                        autocomplete="off" name="password"
                                                                        value="" /><span class="el-input__prefix"><i
                                                                            class="su-input-icon black su-input-icon-prefix el-input__icon su-icon-dyncode"></i></span>
                                                                    <span class="el-input__suffix"
                                                                        style="right: 100px;"><span
                                                                            class="el-input__suffix-inner"
                                                                            style="display: none;"><i
                                                                                class="el-input__icon su-icon-hide el-input__clear"
                                                                                style="line-height: 32px;"
                                                                                onclick="javascript: togglePassword(this);"></i></span></span>
                                                                    <div class="el-input-group__append">
                                                                        <button type="button"
                                                                            class="el-button el-button--default el-button--small"
                                                                            onclick="javascript:sendToken(this);"><span>发送动态码</span></button>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- /*
                <div class="el-form-item el-form-item--small" th:if="${casServerCaptchaEnabled}">
                  <div class="el-form-item__content">
                    <div class="sw-input el-input el-input--medium el-input--prefix el-input--suffix sw-input--circular">

                            <div>
                                <input class="form-control required el-input__inner"
                                       placeholder="请输入图片验证码" th:placeholder="#{screen.welcome.label.captcha.placeholder}"
                                       title="请输入图片验证码" th:title="#{screen.welcome.label.captcha.placeholder}"
                                       type="text"
                                       id="captcha"
                                       name="captcha"
                                       tabindex="3"
                                       style="width: 75%; display: inline-block;"
                                       th:accesskey="#{screen.welcome.label.captcha.accesskey}"
                                       autocomplete="off"/>
                                <img th:src="@{/captcha.jpg}" 
                                     id="captcha_img" 
                                     style="width: 20%; height: 38px; display: inline-block; float: right;"
                                     onclick="javascript:refreshCaptcha(this);" 
                                     title="看不清，换一张！" th:title="#{screen.welcome.label.captcha.refresh}"/>
                            </div>

                      <span class="el-input__prefix"><i class="su-input-icon black su-input-icon-prefix el-input__icon su-icon-dyncode"></i></span>
                    </div>
                  </div>
                </div>
*/ -->
                                                        <el-form-item>
                                                            <input type="hidden" name="currentMenu" value="2" /><input
                                                                type="hidden" name="failN" value="-1" /><input
                                                                type="hidden" name="execution" value="e4s1" /><input
                                                                type="hidden" name="_eventId"
                                                                value="submitPasswordlessToken" /><input type="hidden"
                                                                name="geolocation" /><input
                                                                class="el-button el-button--primary el-button--medium is-round"
                                                                name="submit" accesskey="l" tabindex="6" type="submit"
                                                                value="登录" style="width: 100%" />
                                                        </el-form-item>

                                                        <el-form-item style="text-align: center">

                                                            <div
                                                                style="display: flex;justify-content: space-between;align-items: center;">
                                                                <a href="/cas/personal/forgotYourPassword?service="
                                                                    target="_blank">
                                                                    <el-button type="text"
                                                                        style="font-size: 14px; font-weight: 400;">忘记密码？
                                                                    </el-button>
                                                                </a>
                                                                <a href="/cas/personal/activeYourAccount?service="
                                                                    target="_blank">
                                                                    <el-button type="text"
                                                                        style="font-size: 14px; font-weight: 400;">激活账号
                                                                    </el-button>
                                                                </a>
                                                            </div>

                                                        </el-form-item>

                                                        <el-form-item>
                                                            <div id="loginError2">
                                                            </div>
                                                        </el-form-item>

                                                        <script type="text/javascript">
                                                            $(document).ready(function () {
                                                                var currentMenu = null;
                                                                if (currentMenu == "2") {
                                                                    var containerForm = $("#fm2");
                                                                    var originalUsername = null;
                                                                    if (originalUsername == null) {
                                                                        originalUsername = null;
                                                                    }
                                                                    var hasErrors = false;
                                                                    var errors = [];

                                                                    console.log("trigger processLoginError");
                                                                    processLoginError(containerForm, originalUsername, hasErrors, errors);
                                                                }
                                                                $("#fm2").find("#username").val('');
                                                                $("#fm2").find("#password").val('');
                                                            });
                                                        </script>

                                                    </el-form>

                                                </div>

                                            </div>
                                            <div style="margin: 20px 80px">

                                                <div style="display: flex;align-items: center;">
                                                    <div style="width: 35%;border-top: 1px solid #D2DAE0;"></div>
                                                    <span
                                                        style="margin:0 10px;font-size: 14px;color: rgba(2,21,37,0.35);line-height: 22px;">其他方式登录</span>
                                                    <div style="width: 35%;border-top: 1px solid #D2DAE0;"></div>
                                                </div>

                                                <div class="more"
                                                    style="display: flex ;justify-content:space-between;margin-top: 20px;padding: 0 50px;">
                                                    <a class="btn btn-block btn-social btn-sm"
                                                        style="width: 50px; display: inline-block;"
                                                        href="/cas/federatedRedirect?federatedName=qq" title="腾讯QQ">

                                                        <div @mouseout="jointActive=-1" @mouseover="jointActive=1"
                                                            style="margin:0 5px;font-size:36px;display: inline-block;width: 36px;height: 30px;border-radius: 36px;color:#1196DB;cursor: pointer">
                                                            <i
                                                                :class="jointActive==1?'su-icon-tencent':'su-icon-QQbian'"></i>
                                                        </div>
                                                        <!-- /*
                  <sw-button th:case="qq" :custom-button-size="50" icon="su-icon-tencent" active-color="#1196DB" circle icon-button ></sw-button>
                  <sw-button th:case="openweixin" :custom-button-size="50" icon="su-icon-wechat" active-color="#0EBB07" circle icon-button ></sw-button>
                  <sw-button th:case="workweixin" :custom-button-size="50" icon="su-icon-wechat-company" active-color="#0082EF" circle icon-button ></sw-button>
                  <sw-button th:case="alipay" :custom-button-size="50" icon="su-icon-alipay" active-color="#08ABE4" circle icon-button ></sw-button>
*/ -->
                                                    </a><a class="btn btn-block btn-social btn-sm"
                                                        style="width: 50px; display: inline-block;"
                                                        href="/cas/federatedRedirect?federatedName=openweixin"
                                                        title="微信">

                                                        <div @mouseout="jointActive=-1" @mouseover="jointActive=2"
                                                            style="margin:0 5px;font-size:36px;display: inline-block;width: 36px;height: 30px;border-radius: 36px;color:#0EBB07;cursor: pointer">
                                                            <i
                                                                :class="jointActive==2?'su-icon-wechat':'su-icon-weixinbian'"></i>
                                                        </div>
                                                        <!-- /*
                  <sw-button th:case="qq" :custom-button-size="50" icon="su-icon-tencent" active-color="#1196DB" circle icon-button ></sw-button>
                  <sw-button th:case="openweixin" :custom-button-size="50" icon="su-icon-wechat" active-color="#0EBB07" circle icon-button ></sw-button>
                  <sw-button th:case="workweixin" :custom-button-size="50" icon="su-icon-wechat-company" active-color="#0082EF" circle icon-button ></sw-button>
                  <sw-button th:case="alipay" :custom-button-size="50" icon="su-icon-alipay" active-color="#08ABE4" circle icon-button ></sw-button>
*/ -->
                                                    </a>
                                                </div>
                                            </div>

                                            <div class="tips">
                                                <img style="width: 16px;height: 16px;margin-right: 10px;position: absolute;top: 8px;padding-left: 14px;"
                                                    :src="tipImage" />
                                                <!-- <p>1.统一身份认证平台升级后，现有的认证用户名和密码不变。</p>
              	<p>2.学生登录请使用学号(一卡通号)，教职工登录请使用工号(一卡通号)，初始密码为本人身份证号码或一卡通号后8位。</p>
              	<p>3.如果提示用户名或密码不正确，请点击登录按钮下方忘记密码，通过手机找回。</p> -->
                                                <p>联系电话：网络与信息化处 028-84079530</p>
                                            </div>
                                        </div>

                                    </div>

                                </div>
                            </div>
                        </el-container>
                    </div>

                </div>

            </div>

            <script type="text/javascript">


                var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i) != null;

                function getQueryString(paramName) {
                    var reg = new RegExp("(^|&)" + paramName + "=([^&]*)(&|$)");
                    var r = window.location.search.substr(1).match(reg);
                    if (r != null) return unescape(r[2]);
                    return "";
                }

                var qrCodeEnabled = false;
                var loginType = getQueryString("loginType");
                var currentMenu = null;
                var isQrcode = false;

                if (currentMenu) { } else {
                    if (loginType === "") {
                        currentMenu = "1";
                    } else {
                        currentMenu = loginType;
                    }
                }

                if (currentMenu == 3) {
                    if (qrCodeEnabled == true || qrCodeEnabled == 'true') {
                        currentMenu = "1";
                        isQrcode = true;
                    } else {
                        currentMenu = "1";
                        isQrcode = false;
                    }
                }

                var icon = "\/cas\/file\/png\/icon.png";
                var logo = "\/cas\/file\/png\/logo.png";
                var bg = "\/cas\/themes\/classic\/images\/bg.png";
                var bg2 = "\/cas\/themes\/classic\/images\/bg2.png";
                var bg3 = "\/cas\/themes\/classic\/images\/bg3.png";
                var bg4 = "\/cas\/themes\/classic\/images\/bg4.png";

                var SwUI = SWUI;
                Vue.use(SwUI)

                var vm = new Vue({
                    el: '#vue_main',
                    data: function data() {
                        return {
                            isMobile: isMobile,

                            active: 0,

                            icon: icon,
                            logo: logo,
                            background: bg,
                            bg: [
                                bg, bg2, bg3, bg4
                            ],
                            currentMenu: currentMenu,
                            currentImage: 0,
                            jointActive: -1,
                            loading: false,
                            qrcodeImage: {
                                qrcode: "\/cas\/themes\/template\/images\/qrcode.png",
                                normal: "\/cas\/themes\/template\/images\/pc-login.png"
                            },
                            qrcodeHover: false,
                            isQrcode: isQrcode,
                            qrcodeImgUrl: "",
                            qrcodeTimeout: 0,
                            isQrcodeAlert: false,
                            qrcodeAlertMessage: "",
                            stateKey: "",
                            tipImage: "\/cas\/themes\/classic\/images\/tips.png"
                        };
                    },
                    mounted: function mounted() {
                        if (this.isQrcode) {
                            // 显示二维码
                            var self = this;
                            self.isQrcodeAlert = false;
                            self.qrcodeAlertMessage = "";
                            self.stateKey = "";
                            this.qrcodeImgUrl = "\/cas\/qr\/qrcode" + "?r=" + (new Date()).getTime() + Math.floor(Math.random() * 24);
                            this.startQrComet();
                        }
                    },
                    methods: {
                        changeMenu: function changeMenu(index) {
                            this.currentMenu = index;

                            refreshCaptchaInMenu(this.currentMenu)
                        },
                        changeCarousel: function changeCarousel(index) {
                            this.currentImage = index;
                        },
                        showErrorMessageUsername: function showErrorMessageUsername() {
                            var message = "\u8BF7\u8F93\u5165\u7528\u6237\u540D" + "\u8BF7\u8F93\u5165\u7528\u6237\u540D\/\u624B\u673A\/\u90AE\u7BB1\/\u8BC1\u4EF6\u53F7";
                            this.$message.error(message);
                        },
                        showErrorMessagePassword: function showErrorMessagePassword() {
                            var message = "\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801";
                            this.$message.error(message);
                        },
                        showErrorMessageMobile: function showErrorMessageMobile() {
                            var message = "\u8BF7\u8F93\u5165\u624B\u673A\u53F7";
                            this.$message.error(message);
                        },
                        showErrorMessageDynamicCode: function showErrorMessageDynamicCode() {
                            var message = "\u8BF7\u8F93\u5165\u52A8\u6001\u5BC6\u7801";
                            this.$message.error(message);
                        },
                        showSuccessMessageSendCode: function showSuccessMessageSendCode() {
                            var message = "\u5DF2\u53D1\u9001";
                            this.$message.info(message);
                        },
                        showFailureMessageSendCode: function showFailureMessageSendCode() {
                            var message = "\u53D1\u9001\u5931\u8D25";
                            this.$message.error(message);
                        },
                        openOrCloseQrCode: function openOrCloseQrCode() {
                            var self = this;
                            self.isQrcodeAlert = false;
                            self.qrcodeAlertMessage = "";
                            self.stateKey = "";
                            this.isQrcode = !this.isQrcode;

                            if (this.isQrcode) {
                                this.qrcodeImgUrl = "\/cas\/qr\/qrcode" + "?r=" + (new Date()).getTime() + Math.floor(Math.random() * 24);
                                this.startQrComet();
                            } else {
                                window.clearTimeout(self.qrcodeTimeout);
                            }
                        },
                        startQrComet: function startQrComet() {
                            var self = this;
                            window.clearTimeout(self.qrcodeTimeout); // 开启定时

                            function qrComet() {
                                var url = "\/cas\/qr\/comet";
                                $.ajax({
                                    url: url,
                                    type: "POST",
                                    dataType: "json",
                                    timeout: 1000,
                                    success: function success(r) {
                                        // console.log(r);
                                        if (r && r.code == 0) {
                                            self.isQrcodeExpired = false;
                                            var stateKey = r.data.stateKey;
                                            var qrCode = r.data.qrCode;

                                            if (qrCode.status == "1") {
                                                // 1 创建、未扫码
                                                self.isQrcodeAlert = false;
                                                self.qrcodeAlertMessage = "";
                                                self.stateKey = "";
                                            } else if (qrCode.status == "2") {
                                                // 2 已扫码
                                                self.isQrcodeAlert = true;
                                                self.qrcodeAlertMessage = "扫码成功";
                                                self.stateKey = "";
                                            } else if (qrCode.status == "3") {
                                                // 3 已授权
                                                self.isQrcodeAlert = true;
                                                self.qrcodeAlertMessage = "确认登录";
                                                self.stateKey = stateKey;
                                                window.clearTimeout(self.qrcodeTimeout);
                                                window.setTimeout(function () {
                                                    $("#fm3").submit();
                                                }, 500);
                                            } else if (qrCode.status == "4") {
                                                // 4 已取消
                                                self.isQrcodeAlert = true;
                                                self.qrcodeAlertMessage = "取消登录";
                                                self.stateKey = "";
                                                window.clearTimeout(self.qrcodeTimeout);
                                            }
                                        } else if (r && r.code == 1) {
                                            self.isQrcodeAlert = true;
                                            self.qrcodeAlertMessage = "二维码已失效，点击刷新";
                                            self.stateKey = "";
                                            window.clearTimeout(self.qrcodeTimeout);
                                        } else {
                                            self.isQrcodeAlert = true;
                                            self.qrcodeAlertMessage = "出现异常，点击刷新";
                                            self.stateKey = "";
                                            window.clearTimeout(self.qrcodeTimeout);
                                        }
                                    }
                                });
                                self.qrcodeTimeout = window.setTimeout(qrComet, 2000);
                            }

                            self.qrcodeTimeout = window.setTimeout(qrComet, 2000);
                        },
                        refreshQrCode: function refreshQrCode() {
                            var self = this;
                            self.isQrcodeAlert = false;
                            self.qrcodeAlertMessage = "";
                            self.stateKey = "";
                            this.qrcodeImgUrl = "\/cas\/qr\/qrcode" + "?r=" + (new Date()).getTime() + Math.floor(Math.random() * 24);
                            this.startQrComet();
                        }
                    }
                });
            </script>

            <script type="text/javascript">
                var i_login = "\u7A0D\u7B49\u7247\u523B\u2026\u2026"
                $(document).ready(function () {
                    $("#fm1").submit(function () {
                        var username = $("#fm1").find("#username").val();
                        var password = $("#fm1").find("#password").val();
                        if (username == null || username == '') {
                            $("#showErrorMessageUsername").click();
                            return false;
                        }

                        if (password == null || password == '') {
                            $("#showErrorMessagePassword").click();
                            return false;
                        }

                        // 前端密码加密
                        if (encryptEnabled && password.indexOf('__RSA__') < 0) {
                            var encodedPassword = "__RSA__" + encrypt.encrypt(password);
                            $("#fm1").find("#password").val(encodedPassword);
                        }

                        //$("#fm1").find(":submit").attr("disabled", true);
                        $("#fm1").find(":submit").attr("value", i_login);
                        //console.log(i_login);

                        doLogin();
                        return true;
                    });
                    $("#fm2").submit(function () {
                        var username = $("#fm2").find("#username").val();
                        var password = $("#fm2").find("#password").val();
                        if (username == null || username == '') {
                            $("#showErrorMessageMobile").click();
                            return false;
                        }

                        if (password == null || password == '') {
                            $("#showErrorMessageDynamicCode").click();
                            return false;
                        }

                        //$("#fm2").find(":submit").attr("disabled", true);
                        $("#fm2").find(":submit").attr("value", i_login);
                        //console.log(i_login);

                        doLogin();
                        return true;
                    });
                });
            </script>

            <script type="text/javascript">
                function refreshCaptchaInMenu(currentMenu) {
                    refreshCaptcha($("#fm" + currentMenu).find("#captcha_img"));
                }
                function refreshCaptcha(obj) { // console.log(obj);
                    var captcha_img = $(obj);
                    var captcha_container = captcha_img.parents("div.el-form-item");
                    captcha_container.find("#captcha_img").attr("src", "\/cas\/captcha.jpg" + "?r=" + (new Date()).getTime() + Math.floor(Math.random() * 24));
                    captcha_container.find("#captcha").val("");
                    captcha_container.find("#captcha").focus();
                }
                function togglePassword(obj) {
                    var $obj = $(obj);

                    var $password = $(obj).parents('.sw-input').find("#password");

                    if ($password.attr('type') == 'password') {
                        $password.attr('type', 'text');
                        $obj.removeClass('su-icon-hide').addClass('su-icon-display');
                    } else {
                        $password.attr('type', 'password');
                        $obj.removeClass('su-icon-display').addClass('su-icon-hide');
                    }
                }
            </script>
            <script type="text/javascript">
                var i_sendToken = "\u53D1\u9001\u52A8\u6001\u7801"
                var i_sending = "\u53D1\u9001\u4E2D\u2026\u2026"
                var i_send = "\u5DF2\u53D1\u9001"
                var disableSendToken = false;
                function sendToken(obj) {
                    if (disableSendToken) {
                        return;
                    }

                    var username = $("#fm2").find("#username").val();
                    if (username == "") {
                        $("#showErrorMessageMobile").click();
                        return;
                    }

                    var sendButton = $(obj);

                    disableSendToken = true;
                    sendButton.attr("disabled", true);
                    sendButton.find('span').text(i_sending);

                    var time = 60;
                    var setSended = function () {
                        sendButton.find('span').text(i_send + '(' + time + ')');

                        time--;
                        if (time > 0) {
                            setTimeout(setSended, 1000);
                        } else {
                            disableSendToken = false;
                            sendButton.attr("disabled", false);
                            sendButton.find('span').text(i_sendToken);
                        }

                    }

                    $.ajax({
                        url: "\/cas\/passwordlessTokenSend",
                        type: "POST",
                        data: { "username": username },
                        dataType: "json",
                        success: function (r) {
                            console.log(r);

                            if (r.data.success) {
                                // 提示信息
                                //alert(r.data.success);
                                $("#showSuccessMessageSendCode").click();
                                // 倒计时 60s
                                time = 60;
                                setSended();
                            }

                            if (r.data.error) {
                                //alert(r.data.error);
                                $("#showFailureMessageSendCode").click();
                                time = 0;
                                setSended();
                            }
                        }
                    });

                }
            </script>

            <script type="text/javascript">
                function forgotYourPassword() {
                    window.location.href = "\/cas\/personal\/forgotYourPassword";
                }
            </script>

            <script type="text/javascript">
                function activeYourAccount() {
                    window.location.href = "\/cas\/personal\/activeYourAccount";
                }
            </script>

            <script type="text/javascript">
                function processLoginError(containerForm, originalUsername, hasErrors, errors) {
                    console.log(containerForm);
                    console.log(originalUsername);
                    console.log(hasErrors);
                    console.log(errors);

                    doLoginFailN(containerForm, originalUsername, hasErrors, errors);
                }

                var casServerCaptchaEnabled = true;
                var casServerCaptchaSkipN = true;
                var captchaSkipN = "5";

                function doLogin() {
                    var loginN = (localStorage.loginN || "0");
                    if (loginN == null) {
                        loginN = "0";
                    }

                    loginN = parseInt(loginN) + 1;
                    localStorage.loginN = loginN;

                    var nowTimestamp = new Date().getTime();
                    localStorage.loginNTimestamp = nowTimestamp;
                }

                function doLoginFailN(containerForm, originalUsername, hasErrors, errors) {

                    var failN = (localStorage.failN || "0");
                    if (failN == null) {
                        failN = "0";
                    }

                    if (hasErrors) {
                        failN = parseInt(failN) + 1;
                        localStorage.failN = failN;

                        var nowTimestamp = new Date().getTime();
                        localStorage.failNTimestamp = nowTimestamp;
                    }

                    doCaptchaShow(containerForm, failN);
                }

                function doCaptchaShow(containerForm, failN) {
                    console.log('show captcha, failN=' + failN + ", captchaSkipN=" + captchaSkipN);

                    var fialNInput = containerForm.find('[name="failN"]');
                    fialNInput.val(failN);

                    var captchaInput = containerForm.find('[name="captcha"]');  // console.log(captchaInput.parents("div.el-form-item"));
                    if (captchaInput.length <= 0) {
                        return;
                    }

                    captchaInput.parents("div.captcha-input-container").hide();

                    if (failN < 0) {
                        captchaInput.parents("div.captcha-input-container").show();
                    } else if (failN >= captchaSkipN) {
                        captchaInput.parents("div.captcha-input-container").show();
                    }
                }

                function initCaptchaShow(containerForm) {
                    if (casServerCaptchaEnabled) {
                        if (casServerCaptchaSkipN) {
                            var loginN = (localStorage.loginN || "0");
                            if (loginN == null) {
                                loginN = "0";
                            }
                            loginN = parseInt(loginN);

                            var failN = (localStorage.failN || "0");
                            if (failN == null) {
                                failN = "0";
                            }
                            failN = parseInt(failN);

                            var failNTimestamp = (localStorage.failNTimestamp || "0");
                            if (failNTimestamp == null) {
                                failNTimestamp = "0";
                            }

                            var nowTimestamp = new Date().getTime();
                            console.log('init captcha, failNTimestamp=' + failNTimestamp + ", nowTimestamp=" + nowTimestamp);
                            if (failNTimestamp < (nowTimestamp - (1000 * 60 * 60 * 1))) { // FIXME: 如果 1小时后，再登录，则清空 failN
                                loginN = 0;
                                localStorage.loginN = loginN;
                                failN = 0;
                                localStorage.failN = failN;
                            }

                            if (failN < loginN) {
                                loginN = 0;
                                localStorage.loginN = loginN;
                                failN = 0;
                                localStorage.failN = failN;
                            }

                            doCaptchaShow(containerForm, failN); // 显示
                        } else {
                            doCaptchaShow(containerForm, -1); // 始终显示
                        }
                    }
                }
                $(document).ready(function () {
                    console.log("trigger initCaptchaShow");
                    initCaptchaShow($("#fm1"));
                });
            </script>


            <script type="text/javascript">
                $(document).ready(function () {
                    var location = self.document.location;
                    var hash = decodeURIComponent(location.hash);

                    if (hash != undefined && hash != '' && hash.indexOf('#') === -1) {
                        hash = '#' + hash;
                    }

                    var action = location.href;

                    /* var action = $('#fm1').attr('action');
                    if (action == undefined) {
                        action = location.href;
                    } else {
                        var qidx = location.href.indexOf('?');
                        if (qidx != -1) {
                            var queryParams = location.href.substring(qidx);
                            action += queryParams;
                        }
                    } */
                    action += hash;

                    $('#fm1').attr('action', action);
                    $('#fm2').attr('action', action);
                    $('#fm3').attr('action', action);

                });
            </script>

            <script type="text/javascript">
                $(document).ready(function () {
                    $(".el-carousel__container").css({ "max-height": "1080px", "min-height": "625px" });
                    $("#vue_main").show();
                });
            </script>

        </div>
    </main>




</body>

</html>